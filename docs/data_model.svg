<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="844px" preserveAspectRatio="none" style="width:620px;height:844px;" version="1.1" viewBox="0 0 620 844" width="620px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gfkqmdh9rvuq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="108.0117" style="stroke: #A9A9A9; stroke-width: 1.5;" width="204" x="119" y="8"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="175.5" y="23.002">owaStateStore</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="120" x2="322" y1="28.002" y2="28.002"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="90" x="125" y="42.8369">bool soundReady</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="192" x="125" y="56.1719">Enum SESSION_PHASES sessionPhase</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="131" y="69.5068"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="131" y="82.8418"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="114" x="125" y="96.1768">LevelState levels[]</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="162" x="125" y="109.5117">SequencerState sequencers{}</text><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="201.3564" style="stroke: #A9A9A9; stroke-width: 1.5;" width="112" x="6" y="209.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="13" y="224.502">SESSION_PHASES</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="7" x2="117" y1="229.502" y2="229.502"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="24" x="12" y="244.3369">IDLE</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="48" x="12" y="257.6719">TRANS_10</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="60" x="12" y="271.0068">PLAYING_10</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="42" x="12" y="284.3418">TRANS_8</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="54" x="12" y="297.6768">PLAYING_8</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="42" x="12" y="311.0117">TRANS_6</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="54" x="12" y="324.3467">PLAYING_6</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="42" x="12" y="337.6816">TRANS_4</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="54" x="12" y="351.0166">PLAYING_4</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="72" x="12" y="364.3516">ADVICE_READY</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="72" x="12" y="377.6865">TRANS_ADVICE</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="84" x="12" y="391.0215">PLAYING_ADVICE</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="60" x="12" y="404.3564">TRANS_IDLE</text><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="108.0117" style="stroke: #A9A9A9; stroke-width: 1.5;" width="258" x="252" y="504"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="339" y="519.002">SegmentState</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="253" x2="509" y1="524.002" y2="524.002"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="96" x="258" y="538.8369">string segmentId</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="126" x="258" y="552.1719">string sequencerIds[]</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="264" y="565.5068"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="264" y="578.8418"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="246" x="258" y="592.1768">If this segment is currently in playback.</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="162" x="258" y="605.5117">PLAYING_STATES playingState</text><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="268.0313" style="stroke: #A9A9A9; stroke-width: 1.5;" width="456" x="153" y="176"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="346" y="191.002">LevelState</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="154" x2="608" y1="196.002" y2="196.002"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="84" x="159" y="210.8369">string levelId</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="138" x="159" y="224.1719">SegmentState segments{}</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="90" x="159" y="237.5068">int numSegments</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="250.8418"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="264.1768"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="402" x="159" y="277.5117">Segment ordering (segmentPlaybackIndex is an index into this list).</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="180" x="159" y="290.8467">string segmentPlaybackOrder[];</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="304.1816"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="317.5166"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="396" x="159" y="330.8516">Index of the active segment on this level or false if the level is</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="54" x="159" y="344.1865">inactive.</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="132" x="159" y="357.5215">int activeSegmentIndex</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="370.8564"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="0" x="165" y="384.1914"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="414" x="159" y="397.5264">Id of the active sequencer.  This also needs to be stored because the</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="444" x="159" y="410.8613">playback order may change and the segmentPlaybackIndex may no longer point</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="204" x="159" y="424.1963">to the currently playing sequencer</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="132" x="159" y="437.5313">string activeSegmentId</text><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="68.0068" style="stroke: #A9A9A9; stroke-width: 1.5;" width="114" x="358" y="28"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="366" y="43.002">linkStateStore</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="359" x2="471" y1="48.002" y2="48.002"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="102" x="364" y="62.8369">abletonlink.tempo</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="96" x="364" y="76.1719">abletonlink.beat</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="90" x="364" y="89.5068">abletonlink.bar</text><rect fill="#F0FFFF" filter="url(#f1gfkqmdh9rvuq)" height="161.3516" style="stroke: #A9A9A9; stroke-width: 1.5;" width="174" x="294" y="672"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="332" y="687.002">SequencerState</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="295" x2="467" y1="692.002" y2="692.002"/><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="162" x="300" y="706.8369">Awakening sequencers object</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="24" x="300" y="720.1719">name</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="108" x="300" y="733.5068">clockOffsetSeconds</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="24" x="300" y="746.8418">beat</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="48" x="300" y="760.1768">nextBeat</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="48" x="300" y="773.5117">numBeats</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="72" x="300" y="786.8467">playingState</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="42" x="300" y="800.1816">isReady</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="102" x="300" y="813.5166">playQuant: [4, 0]</text><text fill="#000000" font-family="Monaco" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="102" x="300" y="826.8516">stopQuant: [8, 0]</text><!--link owaStateStore to SESSION_PHASES--><path d="M170.3595,126.7362 C158.65,142.5579 146.5425,159.6468 136,176 C129.1602,186.6097 122.3109,197.8956 115.6912,209.2413 " fill="none" id="owaStateStore-SESSION_PHASES" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="178.3785,116.0098,171.5822,118.4203,171.1933,125.6209,177.9896,123.2104,178.3785,116.0098" style="stroke: #000000; stroke-width: 1.0;"/><!--link owaStateStore to LevelState--><path d="M263.1635,127.3535 C272.9081,142.4575 283.6257,159.0698 294.5045,175.932 " fill="none" id="owaStateStore-LevelState" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="255.915,116.1182,255.8066,123.3285,262.4206,126.2017,262.529,118.9914,255.915,116.1182" style="stroke: #000000; stroke-width: 1.0;"/><!--link LevelState to SegmentState--><path d="M381,457.4469 C381,473.8886 381,489.7596 381,503.8459 " fill="none" id="LevelState-SegmentState" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="381,444.1617,377,450.1617,381,456.1617,385,450.1617,381,444.1617" style="stroke: #000000; stroke-width: 1.0;"/><!--link SegmentState to SequencerState--><path d="M381,625.5214 C381,640.4145 381,656.3368 381,671.6954 " fill="none" id="SegmentState-SequencerState" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="381,612.1791,377,618.1791,381,624.1791,385,618.1791,381,612.1791" style="stroke: #000000; stroke-width: 1.0;"/><!--
@startuml

skinparam backgroundColor transparent
skinparam defaultFontName Monaco
hide circle
skinparam class {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam object {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam state {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam sequenceParticipant {
  backgroundColor Azure
  borderColor DarkGrey
}
skinparam sequenceLifeLine {
  borderColor DarkGrey
}
skinparam sequence {
  arrowColor Black
}
skinparam component {
  backgroundColor Azure
  borderColor DarkGrey
}
skinparam interface {
  backgroundColor Azure
  borderColor DarkGrey
}

object owaStateStore {  
  bool soundReady
  Enum SESSION_PHASES sessionPhase
  \n
  LevelState levels[]
  SequencerState sequencers{}
}

object SESSION_PHASES { 
IDLE
TRANS_10
PLAYING_10
TRANS_8
PLAYING_8
TRANS_6
PLAYING_6
TRANS_4
PLAYING_4
ADVICE_READY
TRANS_ADVICE
PLAYING_ADVICE
TRANS_IDLE
}

owaStateStore *- - SESSION_PHASES

object SegmentState {
  string segmentId
  string sequencerIds[]
  \n
  If this segment is currently in playback.
  PLAYING_STATES playingState
}

object LevelState {
  string levelId
  SegmentState segments{}
  int numSegments
  \n
  Segment ordering (segmentPlaybackIndex is an index into this list).
  string segmentPlaybackOrder[];
  \n
  Index of the active segment on this level or false if the level is 
  inactive.
  int activeSegmentIndex
  \n
  Id of the active sequencer.  This also needs to be stored because the
  playback order may change and the segmentPlaybackIndex may no longer point
  to the currently playing sequencer
  string activeSegmentId
}
owaStateStore *- - LevelState
LevelState *- - SegmentState

object linkStateStore {
  abletonlink.tempo
  abletonlink.beat
  abletonlink.bar
}

object SequencerState {
  Awakening sequencers object
  
  name
  clockOffsetSeconds
  beat
  nextBeat
  numBeats
  playingState
  isReady
  playQuant: [4, 0]
  stopQuant: [8, 0]
}
SegmentState *- - SequencerState


@enduml

PlantUML version 1.2018.01(Sun Jan 28 10:08:22 PST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.4+11
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>