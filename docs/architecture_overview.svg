<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="501px" preserveAspectRatio="none" style="width:2509px;height:501px;" version="1.1" viewBox="0 0 2509 501" width="2509px" zoomAndPan="magnify"><defs><filter height="300%" id="fq08e1qmyevhg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster nodejs.owa--><polygon fill="#FFFFFF" filter="url(#fq08e1qmyevhg)" points="14,16,100,16,107,40.6689,1347,40.6689,1347,489,14,489,14,16" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="14" x2="107" y1="40.6689" y2="40.6689"/><text fill="#000000" font-family="Monaco" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="18" y="33.1689">nodejs.owa</text><!--cluster nodejs.owa.simulator--><polygon fill="#FFFFFF" filter="url(#fq08e1qmyevhg)" points="1149,45,1227,45,1234,69.6689,1339,69.6689,1339,139,1149,139,1149,45" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1149" x2="1234" y1="69.6689" y2="69.6689"/><text fill="#000000" font-family="Monaco" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="1153" y="62.1689">simulator</text><!--cluster quarks.owa--><polygon fill="#FFFFFF" filter="url(#fq08e1qmyevhg)" points="1366,23,1452,23,1459,47.6689,2422,47.6689,2422,343,1366,343,1366,23" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1366" x2="1459" y1="47.6689" y2="47.6689"/><text fill="#000000" font-family="Monaco" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="1370" y="40.1689">quarks.owa</text><!--cluster quarks.supercollider_redux--><polygon fill="#FFFFFF" filter="url(#fq08e1qmyevhg)" points="2061,388,2275,388,2282,412.6689,2418,412.6689,2418,467,2061,467,2061,388" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="2061" x2="2282" y1="412.6689" y2="412.6689"/><text fill="#000000" font-family="Monaco" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="2065" y="405.1689">quarks.supercollider_redux</text><!--class nodejs.owa.OWAController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="115.3442" id="nodejs.owa.OWAController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="320" x="802" y="45"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="916.5" y="63.002">OWAController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="803" x2="1121" y1="71.002" y2="71.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="308" x="808" y="86.9204">Top level entity for controlling everything.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="280" x="808" y="101.5889">Entry point, starts all sub-controllers.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="808" y="116.2573">OWAStateStore store</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="808" y="130.9258">inputController</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="808" y="145.5942">soundController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="803" x2="1121" y1="152.3442" y2="152.3442"/><!--class nodejs.owa.SimulatorInputController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="86.0073" id="nodejs.owa.SimulatorInputController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="292" x="1047" y="234.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="1109" y="252.502">SimulatorInputController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1048" x2="1338" y1="260.502" y2="260.502"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="280" x="1053" y="276.4204">Converts messages from simulator UI into</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="1053" y="291.0889">dispatched actions.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="1053" y="305.7573">oscActionListener</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1048" x2="1338" y1="312.5073" y2="312.5073"/><!--class nodejs.owa.owaStateStore--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="71.3389" id="nodejs.owa.owaStateStore" style="stroke: #A9A9A9; stroke-width: 1.5;" width="222" x="545" y="67"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="610.5" y="85.002">owaStateStore</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="546" x2="766" y1="93.002" y2="93.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="551" y="108.9204">Main state store for OWA app</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="551" y="123.5889">See data model for state tree.</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="546" x2="766" y1="130.3389" y2="130.3389"/><!--class nodejs.owa.linkStateStore--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="86.0073" id="nodejs.owa.linkStateStore" style="stroke: #A9A9A9; stroke-width: 1.5;" width="488" x="22" y="59.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="217" y="77.502">linkStateStore</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="23" x2="509" y1="85.502" y2="85.502"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="476" x="28" y="101.4204">A separate Redux state store for the Ableton Link state.  It changes</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="441" x="28" y="116.0889">very frequently and thus does not need to be in the same store.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="28" y="130.7573">See data model for tree</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="23" x2="509" y1="137.5073" y2="137.5073"/><!--class nodejs.owa.OSCActionListener--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="86.0073" id="nodejs.owa.OSCActionListener" style="stroke: #A9A9A9; stroke-width: 1.5;" width="369" x="572.5" y="395"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="697.5" y="413.002">OSCActionListener</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="573.5" x2="940.5" y1="421.002" y2="421.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="578.5" y="436.9204">Forward actions from osc.js to a Redux state store.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="578.5" y="451.5889">store</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="578.5" y="466.2573">oscSocket</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="573.5" x2="940.5" y1="473.0073" y2="473.0073"/><!--class nodejs.owa.AbletonLinkController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="42.002" id="nodejs.owa.AbletonLinkController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="153" x="314.5" y="256.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="317.5" y="274.502">AbletonLinkController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="315.5" x2="466.5" y1="282.502" y2="282.502"/><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="315.5" x2="466.5" y1="290.502" y2="290.502"/><!--class nodejs.owa.SoundController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="86.0073" id="nodejs.owa.SoundController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="509" x="502.5" y="234.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="704.5" y="252.502">SoundController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="503.5" x2="1010.5" y1="260.502" y2="260.502"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="497" x="508.5" y="276.4204">Forwards state changes to SuperCollider and forwards dispatches from SC</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="508.5" y="291.0889">to the store.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="224" x="508.5" y="305.7573">OSCActionListener actionListener</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="503.5" x2="1010.5" y1="312.5073" y2="312.5073"/><!--class nodejs.owa.simulator.OWAUIApp--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="56.6704" id="nodejs.owa.simulator.OWAUIApp" style="stroke: #A9A9A9; stroke-width: 1.5;" width="173" x="1157.5" y="74"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="1216" y="92.002">OWAUIApp</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1158.5" x2="1329.5" y1="100.002" y2="100.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="1163.5" y="115.9204">Entry point for the GUI</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1158.5" x2="1329.5" y1="122.6704" y2="122.6704"/><!--class OWAController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="100.6758" id="OWAController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="348" x="2036" y="52"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="2164.5" y="70.002">OWAController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2037" x2="2383" y1="78.002" y2="78.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="2042" y="93.9204">StateStore owaStore</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="2042" y="108.5889">StateStore linkStore</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="329" x="2042" y="123.2573">SessionTimingController sessionTimingController</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336" x="2042" y="137.9258">ReduxAbletonTempoClockController clockController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2037" x2="2383" y1="144.6758" y2="144.6758"/><!--class SessionTimingController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="86.0073" id="SessionTimingController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="467" x="1946.5" y="234.5"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="161" x="2099.5" y="252.502">SessionTimingController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1947.5" x2="2412.5" y1="260.502" y2="260.502"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="455" x="1952.5" y="276.4204">Handles scheduling the timing to transition from one phase to the</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="1952.5" y="291.0889">next using the master clock.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336" x="1952.5" y="305.7573">ReduxAbletonTempoClockController clockController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1947.5" x2="2412.5" y1="312.5073" y2="312.5073"/><!--class LevelTimingController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="115.3442" id="LevelTimingController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="537" x="1374.5" y="220"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="1569.5" y="238.002">LevelTimingController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1375.5" x2="1910.5" y1="246.002" y2="246.002"/><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="497" x="1380.5" y="261.9204">Handles the scheduling of playback within one level.  When playingState</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="497" x="1380.5" y="276.5889">changes, start changing sequencer state appropriately.  Queue sequencer</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="525" x="1380.5" y="291.2573">start, when sequencer starts queue sequencer stop and next sequencer start,</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="1380.5" y="305.9258">etc.</text><text fill="#000000" font-family="Monaco" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336" x="1380.5" y="320.5942">ReduxAbletonTempoClockController clockController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="1375.5" x2="1910.5" y1="327.3442" y2="327.3442"/><!--class quarks.supercollider_redux.StateStore--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="42.002" id="quarks.supercollider_redux.StateStore" style="stroke: #A9A9A9; stroke-width: 1.5;" width="76" x="2334" y="417"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="2337" y="435.002">StateStore</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2335" x2="2409" y1="443.002" y2="443.002"/><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2335" x2="2409" y1="451.002" y2="451.002"/><!--class quarks.supercollider_redux.ReduxAbletonTempoClockController--><rect fill="#F0FFFF" filter="url(#fq08e1qmyevhg)" height="42.002" id="quarks.supercollider_redux.ReduxAbletonTempoClockController" style="stroke: #A9A9A9; stroke-width: 1.5;" width="230" x="2069" y="417"/><text fill="#000000" font-family="Monaco" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="2072" y="435.002">ReduxAbletonTempoClockController</text><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2070" x2="2298" y1="443.002" y2="443.002"/><line style="stroke: #A9A9A9; stroke-width: 1.5;" x1="2070" x2="2298" y1="451.002" y2="451.002"/><!--link nodejs.owa.OWAController to nodejs.owa.SimulatorInputController--><path d="M1048.5927,168.1005 C1077.8235,190.2451 1109.6944,214.3897 1136.0407,234.349 " fill="none" id="nodejs.owa.OWAController-nodejs.owa.SimulatorInputController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="1037.958,160.0439,1040.3251,166.8554,1047.5231,167.2902,1045.156,160.4787,1037.958,160.0439" style="stroke: #000000; stroke-width: 1.0;"/><!--link nodejs.owa.OWAController to nodejs.owa.AbletonLinkController--><path d="M788.9252,158.7013 C787.277,159.1403 785.635,159.5734 784,160 C652.8532,194.2211 611.1931,170.5442 485,220 C461.6669,229.1444 437.5993,243.9868 419.6588,256.3011 " fill="none" id="nodejs.owa.OWAController-nodejs.owa.AbletonLinkController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="801.6646,155.2258,794.8234,152.946,790.0877,158.3842,796.9289,160.664,801.6646,155.2258" style="stroke: #000000; stroke-width: 1.0;"/><!--link nodejs.owa.OWAController to nodejs.owa.SoundController--><path d="M884.4705,168.6837 C858.717,190.6684 830.7242,214.5647 807.5483,234.349 " fill="none" id="nodejs.owa.OWAController-nodejs.owa.SoundController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="894.5914,160.0439,887.431,160.8972,885.4646,167.835,892.625,166.9817,894.5914,160.0439" style="stroke: #000000; stroke-width: 1.0;"/><!--link nodejs.owa.SoundController to nodejs.owa.OSCActionListener--><path d="M757,333.6611 C757,353.7485 757,376.0552 757,394.8702 " fill="none" id="nodejs.owa.SoundController-nodejs.owa.OSCActionListener" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="757,320.5111,753,326.5111,757,332.5111,761,326.5111,757,320.5111" style="stroke: #000000; stroke-width: 1.0;"/><!--link OWAController to quarks.supercollider_redux.StateStore--><path d="M2395.7933,155.1364 C2424.4255,171.3648 2450.3087,192.5032 2468,220 C2497.579,265.9731 2489.0522,292.5495 2468,343 C2455.0874,373.9443 2426.646,399.9606 2404.0535,416.8989 " fill="none" id="OWAController-quarks.supercollider_redux.StateStore" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="2384.2586,148.9299,2387.6469,155.2954,2394.826,154.6159,2391.4376,148.2505,2384.2586,148.9299" style="stroke: #000000; stroke-width: 1.0;"/><!--link OWAController to quarks.supercollider_redux.ReduxAbletonTempoClockController--><path d="M2370.1997,160.0403 C2394.4465,175.7558 2416.2496,195.4519 2431,220 C2459.1561,266.8581 2461.9488,297.9376 2431,343 C2429.5633,345.0919 2312.3673,389.581 2239.9441,416.9256 " fill="none" id="OWAController-quarks.supercollider_redux.ReduxAbletonTempoClockController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="2358.9039,153.0966,2361.9206,159.6464,2369.1268,159.3809,2366.1101,152.8311,2358.9039,153.0966" style="stroke: #000000; stroke-width: 1.0;"/><!--link OWAController to SessionTimingController--><path d="M2199.0875,166.1565 C2195.1982,188.8438 2190.9121,213.8463 2187.3884,234.4012 " fill="none" id="OWAController-SessionTimingController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="2201.3228,153.1173,2196.3664,158.3551,2199.2951,164.9447,2204.2514,159.7069,2201.3228,153.1173" style="stroke: #000000; stroke-width: 1.0;"/><!--link SessionTimingController to quarks.supercollider_redux.ReduxAbletonTempoClockController--><path d="M2181.4027,333.7821 C2182.1202,362.5725 2182.9506,395.8944 2183.4755,416.9556 " fill="none" id="SessionTimingController-quarks.supercollider_redux.ReduxAbletonTempoClockController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="2181.0719,320.5111,2177.2227,326.6089,2181.371,332.5074,2185.2202,326.4095,2181.0719,320.5111" style="stroke: #000000; stroke-width: 1.0;"/><!--link OWAController to LevelTimingController--><path d="M2033.5696,156.9538 C1968.6899,176.9784 1895.0403,199.7098 1829.318,219.9944 " fill="none" id="OWAController-LevelTimingController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="2046.0001,153.1173,2039.0873,151.0648,2034.5339,156.6564,2041.4467,158.7089,2046.0001,153.1173" style="stroke: #000000; stroke-width: 1.0;"/><!--link LevelTimingController to quarks.supercollider_redux.ReduxAbletonTempoClockController--><path d="M1849.9091,338.8843 C1942.8331,366.4523 2046.3706,397.1691 2113.1994,416.9954 " fill="none" id="LevelTimingController-quarks.supercollider_redux.ReduxAbletonTempoClockController" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="1837.1671,335.1041,1841.7816,340.6455,1848.6715,338.5173,1844.057,332.9759,1837.1671,335.1041" style="stroke: #000000; stroke-width: 1.0;"/><!--
@startuml

skinparam backgroundColor transparent
skinparam defaultFontName Monaco
hide circle
skinparam class {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam object {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam state {
  backgroundColor Azure
  borderColor DarkGrey
  arrowColor Black
  fontColor Black
}
skinparam sequenceParticipant {
  backgroundColor Azure
  borderColor DarkGrey
}
skinparam sequenceLifeLine {
  borderColor DarkGrey
}
skinparam sequence {
  arrowColor Black
}
skinparam component {
  backgroundColor Azure
  borderColor DarkGrey
}
skinparam interface {
  backgroundColor Azure
  borderColor DarkGrey
}

namespace nodejs.owa {
  class OWAController {
    Top level entity for controlling everything.
    Entry point, starts all sub-controllers.

    OWAStateStore store
    inputController
    soundController
  }

  class SimulatorInputController {
    
    Converts messages from simulator UI into
    dispatched actions.

    oscActionListener
  }
  OWAController o- - SimulatorInputController
  
  /'class ArduinoInputController {'/
    /'Converts arduino inputs to dispatched actions.'/

    /'serialport.SerialPort arduinoPort'/
    /'..'/
    /'+ handleButtonMessage(data)'/
  /'}'/
  /'OWAController o- - ArduinoInputController'/
  
  class owaStateStore {
    Main state store for OWA app

    See data model for state tree.
  }

  class linkStateStore {
    A separate Redux state store for the Ableton Link state.  It changes
    very frequently and thus does not need to be in the same store.

    See data model for tree
  }

  class OSCActionListener {
    Forward actions from osc.js to a Redux state store.

    store
    oscSocket
  }

  class AbletonLinkController
  OWAController *- - AbletonLinkController
  class SoundController {
    Forwards state changes to SuperCollider and forwards dispatches from SC
    to the store.

    OSCActionListener actionListener
  }
  OWAController *- - SoundController
  SoundController *- - OSCActionListener

  /'class OSCActionDispatcher {'/
    /'Redux middleware to dispatch actions via osc.js'/

    /'oscSocket'/
  /'}'/

  namespace simulator {
    class OWAUIApp {
      Entry point for the GUI

    }
  }

}

package quarks.owa {
  class OWAController {
    StateStore owaStore
    StateStore linkStore
    SessionTimingController sessionTimingController
    ReduxAbletonTempoClockController clockController
  }
  OWAController *- - quarks.supercollider_redux.StateStore
  OWAController *- - quarks.supercollider_redux.ReduxAbletonTempoClockController

  class SessionTimingController {
    Handles scheduling the timing to transition from one phase to the
    next using the master clock.
    
    ReduxAbletonTempoClockController clockController
  }
  OWAController *- - SessionTimingController
  SessionTimingController *- - quarks.supercollider_redux.ReduxAbletonTempoClockController

  class LevelTimingController {
    Handles the scheduling of playback within one level.  When playingState
    changes, start changing sequencer state appropriately.  Queue sequencer
    start, when sequencer starts queue sequencer stop and next sequencer start,
    etc.

    ReduxAbletonTempoClockController clockController
  }
  OWAController *- - LevelTimingController
  LevelTimingController *- - quarks.supercollider_redux.ReduxAbletonTempoClockController
}


@enduml

PlantUML version 1.2017.14(Mon Jun 05 02:56:32 PDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.6.0_65-b14-468-11M4833
Operating System: Mac OS X
OS Version: 10.11.2
Default Encoding: MacRoman
Language: en
Country: US
--></g></svg>